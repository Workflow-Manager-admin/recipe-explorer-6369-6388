{"is_source_file": true, "format": "Python", "description": "This file defines API endpoints for recipe management using FastAPI. It includes routes for creating, browsing, retrieving, updating, deleting recipes, and managing user favorites. It leverages SQLAlchemy for database interactions, and uses dependency injection for database sessions and user authentication.", "external_files": ["./models", "./db", "./db_models", "./auth"], "external_methods": ["get_db", "get_current_user"], "published": ["router"], "classes": [{"name": "RecipeCreate", "description": "Data model for creating a new recipe."}, {"name": "RecipeUpdate", "description": "Data model for updating an existing recipe."}, {"name": "RecipeResponse", "description": "Response schema for recipe data, including favorite status."}, {"name": "RecipeListResponse", "description": "Response model for a list of recipes with total count."}, {"name": "FavoriteRequest", "description": "Request schema for adding a recipe to favorites."}], "methods": [{"name": "create_recipe( recipe: RecipeCreate, db: AsyncSession = Depends(get_db), current_user: User = Depends(get_current_user) )", "description": "Creates a new recipe owned by the current user.", "scope": "", "scopeKind": ""}, {"name": "browse_recipes( db: AsyncSession = Depends(get_db), q: Optional[str] = Query(None, description=\"Search string\"), skip: int = 0, limit: int = 20, current_user: Optional[User] = Depends(get_current_user) )", "description": "Allows browsing and searching recipes with pagination. Adds 'is_favorite' info if user is logged in.", "scope": "", "scopeKind": ""}, {"name": "get_recipe( recipe_id: int, db: AsyncSession = Depends(get_db), current_user: Optional[User] = Depends(get_current_user) )", "description": "Retrieves recipe details by ID, indicating if it's a favorite for the current user.", "scope": "", "scopeKind": ""}, {"name": "update_recipe( recipe_id: int, recipe_update: RecipeUpdate, db: AsyncSession = Depends(get_db), current_user: User = Depends(get_current_user) )", "description": "Updates an existing recipe if the current user is the owner.", "scope": "", "scopeKind": ""}, {"name": "delete_recipe( recipe_id: int, db: AsyncSession = Depends(get_db), current_user: User = Depends(get_current_user) )", "description": "Deletes a recipe if the current user is the owner.", "scope": "", "scopeKind": ""}, {"name": "add_favorite( fav_req: FavoriteRequest, db: AsyncSession = Depends(get_db), current_user: User = Depends(get_current_user), )", "description": "Adds a recipe to the current user's favorites.", "scope": "", "scopeKind": ""}, {"name": "remove_favorite( recipe_id: int, db: AsyncSession = Depends(get_db), current_user: User = Depends(get_current_user), )", "description": "Removes a recipe from the current user's favorites.", "scope": "", "scopeKind": ""}, {"name": "list_favorites( db: AsyncSession = Depends(get_db), current_user: User = Depends(get_current_user) )", "description": "Lists all favorite recipes of the current user.", "scope": "", "scopeKind": ""}], "calls": ["select()", "db.execute()", "db.get()", "db.add()", "db.commit()", "db.refresh()", "current_user.favorites.append()", "current_user.favorites.remove()", "current_user.favorites"], "search-terms": ["APIRouter", "recipe_router", "recipes", "CRUD operations", "Favorites", "recipe", "async", "FastAPI routes", "SQLAlchemy", "Database interactions"], "state": 2, "file_id": 10, "knowledge_revision": 22, "git_revision": "bf8c6e846df5a67727f7f350f1e901318c1a421d", "ctags": [{"_type": "tag", "name": "add_favorite", "path": "/home/kavia/workspace/code-generation/recipe-explorer-6369-6388/recipe_backend/src/api/recipe_router.py", "pattern": "/^async def add_favorite($/", "language": "Python", "kind": "function", "signature": "( fav_req: FavoriteRequest, db: AsyncSession = Depends(get_db), current_user: User = Depends(get_current_user), )"}, {"_type": "tag", "name": "browse_recipes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-6369-6388/recipe_backend/src/api/recipe_router.py", "pattern": "/^async def browse_recipes($/", "language": "Python", "kind": "function", "signature": "( db: AsyncSession = Depends(get_db), q: Optional[str] = Query(None, description=\"Search string\"), skip: int = 0, limit: int = 20, current_user: Optional[User] = Depends(get_current_user) )"}, {"_type": "tag", "name": "create_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-6369-6388/recipe_backend/src/api/recipe_router.py", "pattern": "/^async def create_recipe($/", "language": "Python", "kind": "function", "signature": "( recipe: RecipeCreate, db: AsyncSession = Depends(get_db), current_user: User = Depends(get_current_user) )"}, {"_type": "tag", "name": "delete_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-6369-6388/recipe_backend/src/api/recipe_router.py", "pattern": "/^async def delete_recipe($/", "language": "Python", "kind": "function", "signature": "( recipe_id: int, db: AsyncSession = Depends(get_db), current_user: User = Depends(get_current_user) )"}, {"_type": "tag", "name": "get_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-6369-6388/recipe_backend/src/api/recipe_router.py", "pattern": "/^async def get_recipe($/", "language": "Python", "kind": "function", "signature": "( recipe_id: int, db: AsyncSession = Depends(get_db), current_user: Optional[User] = Depends(get_current_user) )"}, {"_type": "tag", "name": "list_favorites", "path": "/home/kavia/workspace/code-generation/recipe-explorer-6369-6388/recipe_backend/src/api/recipe_router.py", "pattern": "/^async def list_favorites($/", "language": "Python", "kind": "function", "signature": "( db: AsyncSession = Depends(get_db), current_user: User = Depends(get_current_user) )"}, {"_type": "tag", "name": "remove_favorite", "path": "/home/kavia/workspace/code-generation/recipe-explorer-6369-6388/recipe_backend/src/api/recipe_router.py", "pattern": "/^async def remove_favorite($/", "language": "Python", "kind": "function", "signature": "( recipe_id: int, db: AsyncSession = Depends(get_db), current_user: User = Depends(get_current_user), )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/recipe-explorer-6369-6388/recipe_backend/src/api/recipe_router.py", "pattern": "/^router = APIRouter(prefix=\"\\/recipes\", tags=[\"recipes\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "update_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-6369-6388/recipe_backend/src/api/recipe_router.py", "pattern": "/^async def update_recipe($/", "language": "Python", "kind": "function", "signature": "( recipe_id: int, recipe_update: RecipeUpdate, db: AsyncSession = Depends(get_db), current_user: User = Depends(get_current_user) )"}], "hash": "d27558f78005ed42b84726eba759f942", "format-version": 4, "code-base-name": "recipe_backend", "filename": "recipe_backend/src/api/recipe_router.py", "fields": [{"name": "router = APIRouter(prefix=\"\\/recipes\", tags=[\"recipes\"])", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"22": "bf8c6e846df5a67727f7f350f1e901318c1a421d"}]}